# Dirghayu Variant Schema Configuration
# Using TOML for human-readable schema definitions

[metadata]
name = "GenomicVariant"
version = "1.0.0"
description = "Schema for genomic variant data with Indian population context"
created = "2026-01-21"
updated = "2026-01-21"

[fields.chromosome]
type = "string"
required = true
description = "Chromosome identifier"
enum = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "X", "Y", "MT"]
validation = "Must be valid chromosome identifier"

[fields.position]
type = "integer"
required = true
description = "Genomic position (1-based)"
minimum = 1
validation = "Must be positive integer"

[fields.ref_allele]
type = "string"
required = true
description = "Reference allele sequence"
pattern = "^[ACGTN]+$"
validation = "Only A,C,G,T,N characters allowed"

[fields.alt_allele]
type = "string"
required = true
description = "Alternative allele sequence(s)"
pattern = "^[ACGTN,]+$"
validation = "Comma-separated alleles, only A,C,G,T,N characters"

[fields.quality]
type = "number"
required = true
description = "Variant quality score (Phred-scaled)"
minimum = 0.0
validation = "Must be non-negative"

[fields.filter]
type = "string"
required = true
description = "Filter status"
enum = ["PASS", "LowQual", "VQSRTrancheSNP99.00to99.90", "VQSRTrancheSNP99.90to100.00"]

[fields.annotations]
type = "object"
required = false
description = "Variant annotations from various sources"

[fields.annotations.gene_symbol]
type = "string"
required = false
description = "HGNC gene symbol"
example = "BRCA1"

[fields.annotations.ensembl_id]
type = "string"
required = false
description = "Ensembl gene/transcript ID"
pattern = "^ENSG\\d+|ENST\\d+$"
example = "ENSG00000012048"

[fields.annotations.protein_change]
type = "string"
required = false
description = "Protein-level change (e.g., p.Val600Glu)"
example = "p.Glu23Lys"

[fields.annotations.clinical_significance]
type = "string"
required = false
description = "Clinical significance classification"
enum = ["pathogenic", "likely_pathogenic", "uncertain_significance", "likely_benign", "benign", "not_provided", "drug_response", "histocompatibility", "other"]

[fields.annotations.transcript_consequence]
type = "string"
required = false
description = "Transcript consequence (SO term)"
enum = ["transcript_ablation", "splice_acceptor_variant", "splice_donor_variant", "stop_gained", "frameshift_variant", "stop_lost", "start_lost", "transcript_amplification", "inframe_insertion", "inframe_deletion", "missense_variant", "protein_altering_variant", "splice_region_variant", "splice_donor_5th_base_variant", "splice_donor_region_variant", "splice_polypyrimidine_tract_variant", "incomplete_terminal_codon_variant", "start_retained_variant", "stop_retained_variant", "synonymous_variant", "coding_sequence_variant", "mature_miRNA_variant", "5_prime_UTR_variant", "3_prime_UTR_variant", "non_coding_transcript_exon_variant", "intron_variant", "NMD_transcript_variant", "non_coding_transcript_variant", "upstream_gene_variant", "downstream_gene_variant", "TFBS_ablation", "TFBS_amplification", "TF_binding_site_variant", "regulatory_region_ablation", "regulatory_region_amplification", "feature_elongation", "regulatory_region_variant", "feature_truncation", "intergenic_variant"]

[fields.population_frequencies]
type = "object"
required = false
description = "Allele frequencies in different populations"

[fields.population_frequencies.gnomad_af]
type = "number"
required = false
description = "gnomAD global allele frequency"
minimum = 0.0
maximum = 1.0
precision = 6

[fields.population_frequencies.gnomad_afr_af]
type = "number"
required = false
description = "gnomAD African allele frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.gnomad_amr_af]
type = "number"
required = false
description = "gnomAD American allele frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.gnomad_asj_af]
type = "number"
required = false
description = "gnomAD Ashkenazi Jewish allele frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.gnomad_eas_af]
type = "number"
required = false
description = "gnomAD East Asian allele frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.gnomad_fin_af]
type = "number"
required = false
description = "gnomAD Finnish allele frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.gnomad_nfe_af]
type = "number"
required = false
description = "gnomAD Non-Finnish European allele frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.gnomad_oth_af]
type = "number"
required = false
description = "gnomAD Other allele frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.gnomad_sas_af]
type = "number"
required = false
description = "gnomAD South Asian allele frequency"
minimum = 0.0
maximum = 1.0

# Indian-specific population frequencies
[fields.population_frequencies.genome_india_af]
type = "number"
required = false
description = "GenomeIndia project allele frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.indigen_af]
type = "number"
required = false
description = "IndiGen project allele frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.igvdb_af]
type = "number"
required = false
description = "Indian Genetic Variation Database allele frequency"
minimum = 0.0
maximum = 1.0

# Regional Indian populations
[fields.population_frequencies.north_india_af]
type = "number"
required = false
description = "North India regional frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.south_india_af]
type = "number"
required = false
description = "South India regional frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.west_india_af]
type = "number"
required = false
description = "West India regional frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.east_india_af]
type = "number"
required = false
description = "East India regional frequency"
minimum = 0.0
maximum = 1.0

[fields.population_frequencies.northeast_india_af]
type = "number"
required = false
description = "Northeast India regional frequency"
minimum = 0.0
maximum = 1.0

[fields.pathogenicity_scores]
type = "object"
required = false
description = "Pathogenicity prediction scores from various tools"

[fields.pathogenicity_scores.alphamissense_score]
type = "number"
required = false
description = "AlphaMissense pathogenicity score"
minimum = 0.0
maximum = 1.0

[fields.pathogenicity_scores.eve_score]
type = "number"
required = false
description = "EVE (Evolutionary model of Variant Effect) score"
minimum = 0.0
maximum = 1.0

[fields.pathogenicity_scores.revel_score]
type = "number"
required = false
description = "REVEL pathogenicity score"
minimum = 0.0
maximum = 1.0

[fields.pathogenicity_scores.cadd_score]
type = "number"
required = false
description = "CADD pathogenicity score"
minimum = 0.0
maximum = 50.0

[fields.protein_stability]
type = "object"
required = false
description = "Protein stability predictions"

[fields.protein_stability.foldx_ddG]
type = "number"
required = false
description = "FoldX stability change prediction (kcal/mol)"
validation = "Negative values indicate stabilizing mutations"

[fields.protein_stability.rosetta_ddG]
type = "number"
required = false
description = "Rosetta stability change prediction"

[validation_rules]
min_quality_score = 20.0
max_missing_annotations = 0.5
require_indian_frequencies = true
clinical_variant_threshold = 0.7

[indices]
primary_key = "chromosome,position,ref_allele,alt_allele"
search_indices = [
    "gene_symbol",
    "clinical_significance",
    "chromosome,position",
    "alphamissense_score"
]

[partitions]
strategy = "chromosome_based"
max_partition_size = "1GB"